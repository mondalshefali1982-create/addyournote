<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Notes & Expenses App</title>
<style>
html, body { margin:0; padding:0; font-family:Arial,sans-serif; height:100%; transition:background 0.3s,color 0.3s; overflow-x:hidden; }
body.light { background: linear-gradient(135deg, #f6d365 0%, #fda085 100%); color:#222; }
body.dark { background: linear-gradient(135deg, #2c3e50 0%, #4ca1af 100%); color:#fff; }

header { position:fixed; top:0; left:0; width:100%; z-index:1000; background:transparent; padding-bottom:10px; }
header .top-row { display:flex; justify-content:space-between; align-items:center; padding:10px 15px; }
.mode-toggle button, .top-buttons button, .delete-all-btn { cursor:pointer; border:none; border-radius:8px; padding:6px 10px; font-size:14px; }
.mode-toggle button { background:#888; color:#fff; }
.light .top-buttons button { background:#66a6ff; color:#fff; }
.light .top-buttons button.active { background:#5591e6; }
.dark .top-buttons button { background:#555; color:#fff; }
.dark .top-buttons button.active { background:#777; }
.delete-all-btn { background:#d9534f; color:#fff; font-size:16px; padding:10px; }
header .delete-row { display:flex; justify-content:center; gap:10px; flex-wrap:wrap; margin-bottom:10px; }

.app-container { display:flex; flex-direction:column; height:100vh; width:100%; position:relative; }

.page { flex:1; overflow-y:auto; padding:180px 20px 20px 20px; transition: transform 0.3s ease; }

.inputs input, .inputs select { width:calc(100% - 22px); padding:12px; margin-bottom:10px; border-radius:10px; border:1px solid #ccc; font-size:16px; }

.add-btn { width:100%; padding:12px; border:none; border-radius:12px; font-size:16px; cursor:pointer; margin-bottom:15px; transition:0.3s; }
.light .add-btn{ background:#66a6ff; color:#fff; } .light .add-btn:hover{ background:#5591e6; }
.dark .add-btn{ background:#555; color:#fff; } .dark .add-btn:hover{ background:#777; }

ul { list-style:none; padding:0; }
li { background:#fff; padding:15px; margin-bottom:12px; border-radius:16px; display:flex; justify-content:space-between; align-items:center; font-size:16px; word-wrap:break-word; box-shadow:0 4px 8px rgba(0,0,0,0.1); transition: all 0.3s; }
li:hover { transform: translateY(-2px); box-shadow:0 6px 12px rgba(0,0,0,0.15); }
body.dark li { background:#333; color:#fff; box-shadow:0 4px 8px rgba(0,0,0,0.3); }
li button { margin-left:5px; padding:5px 8px; border:none; border-radius:6px; cursor:pointer; font-size:14px; }
li button.edit{ background:#f0ad4e; color:#fff; }
li button.delete{ background:#d9534f; color:#fff; }

.summary { font-weight:bold; margin-bottom:10px; font-size:16px; }
#calendarBtn { position:fixed; bottom:20px; right:20px; background:#66a6ff; color:#fff; border:none; padding:15px; border-radius:50%; font-size:20px; cursor:pointer; box-shadow:0 4px 8px rgba(0,0,0,0.3); transition:0.3s; }
#calendarBtn:hover { background:#5591e6; }

#calendarModal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; }
#calendarContent { background:#fff; padding:20px; border-radius:12px; width:90%; max-width:400px; max-height:80%; overflow-y:auto; position:relative; }
#calendarContent h2 { text-align:center; margin-top:0; }
#calendarContent .close { position:absolute; top:10px; right:10px; cursor:pointer; font-size:20px; font-weight:bold; }
body.dark #calendarContent { background:#333; color:#fff; }
.monthBtn { display:block; width:100%; margin:5px 0; padding:10px; border:none; border-radius:8px; cursor:pointer; background:#66a6ff; color:white; font-size:16px; }
body.dark .monthBtn { background:#555; color:white; }
#backBtn { display:none;margin-top:10px;padding:10px;width:100%;border:none;border-radius:8px;background:#d9534f;color:white;cursor:pointer; }
</style>
</head>
<body class="light">

<div class="app-container" id="appContainer">
<header>
  <div class="top-row">
    <div class="mode-toggle"><button onclick="toggleMode()">Mode</button></div>
    <div class="top-buttons">
      <button id="notesBtn" class="active" onclick="showPage('notes')">Notes</button>
      <button id="expensesBtn" onclick="showPage('expenses')">Expenses</button>
      <button onclick="chooseBackground()">Background</button>
      <button onclick="resetBackground()">Reset BG</button>
      <input type="file" id="bgInput" accept="image/*" style="display:none" onchange="setBackground(event)">
    </div>
  </div>
  <div class="delete-row">
    <button class="delete-all-btn" onclick="deleteAllNotes()">Delete All Notes</button>
    <button class="delete-all-btn" onclick="deleteAllExpenses()">Delete All Expenses</button>
  </div>
</header>

<!-- Notes Page -->
<div class="page" id="notesPage">
  <div class="inputs"><input type="text" id="noteInput" placeholder="Enter your note"></div>
  <button class="add-btn" onclick="addNote()">Add Note</button>
  <ul id="notesList"></ul>
</div>

<!-- Expenses Page -->
<div class="page" id="expensesPage" style="display:none;">
  <div class="inputs">
    <input type="text" id="expenseDesc" placeholder="Description">
    <input type="number" id="expenseAmount" placeholder="Amount">
    <select id="expenseMonth">
      <option value="">Select Month</option>
      <option value="1">January</option><option value="2">February</option><option value="3">March</option>
      <option value="4">April</option><option value="5">May</option><option value="6">June</option>
      <option value="7">July</option><option value="8">August</option>
      <option value="9">September</option>
      <option value="10">October</option><option value="11">November</option>
      <option value="12">December</option>
    </select>
  </div>
  <button class="add-btn" onclick="addExpense()">Add Expense</button>
  <div class="summary" id="totalExpense">Total Expenses: $0</div>
  <ul id="expensesList"></ul>
</div>

<button id="calendarBtn" onclick="openCalendar()">ðŸ“…</button>

<!-- Calendar Modal -->
<div id="calendarModal">
  <div id="calendarContent">
    <span class="close" onclick="closeCalendar()">Ã—</span>
    <h2>Expenses Calendar</h2>
    <div id="calendarList"></div>
    <button id="backBtn" onclick="showAllMonths()">Back</button>
    <div id="monthTotal" class="summary"></div>
  </div>
</div>

<script>
// Data
let notes = JSON.parse(localStorage.getItem('notes'))||[];
let expenses = JSON.parse(localStorage.getItem('expenses'))||[];
let mode = localStorage.getItem('mode')||'light';
document.body.className = mode;

// Elements
const notesPage=document.getElementById('notesPage');
const expensesPage=document.getElementById('expensesPage');
const notesBtn=document.getElementById('notesBtn');
const expensesBtn=document.getElementById('expensesBtn');
const notesList=document.getElementById('notesList');
const expensesList=document.getElementById('expensesList');
const totalExpense=document.getElementById('totalExpense');
const calendarModal=document.getElementById('calendarModal');
const calendarList=document.getElementById('calendarList');
const monthTotal=document.getElementById('monthTotal');
const backBtn=document.getElementById('backBtn');
const appContainer=document.getElementById('appContainer');

// Mode
function toggleMode(){ 
  if(document.body.classList.contains('light')){ document.body.className='dark'; mode='dark'; } 
  else{ document.body.className='light'; mode='light'; } 
  localStorage.setItem('mode',mode); 
}

// Page Toggle
function showPage(page){
  if(page==='notes'){ notesPage.style.display='block'; expensesPage.style.display='none'; notesBtn.classList.add('active'); expensesBtn.classList.remove('active'); }
  else{ notesPage.style.display='none'; expensesPage.style.display='block'; notesBtn.classList.remove('active'); expensesBtn.classList.add('active'); displayExpenses(); }
}

// Notes
function displayNotes(){ notesList.innerHTML=''; notes.forEach((n,i)=>{ const li=document.createElement('li'); li.textContent=n; const editBtn=document.createElement('button'); editBtn.textContent='Edit'; editBtn.className='edit'; editBtn.onclick=()=>editNote(i); const delBtn=document.createElement('button'); delBtn.textContent='Delete'; delBtn.className='delete'; delBtn.onclick=()=>deleteNote(i); li.appendChild(editBtn); li.appendChild(delBtn); notesList.appendChild(li); }); }
function addNote(){ const n=document.getElementById('noteInput'); if(n.value.trim()==='') return alert('Enter a note!'); notes.push(n.value); localStorage.setItem('notes',JSON.stringify(notes)); n.value=''; displayNotes(); }
function editNote(i){ const n=prompt('Edit note:',notes[i]); if(n!==null && n.trim()!==''){ notes[i]=n; localStorage.setItem('notes',JSON.stringify(notes)); displayNotes(); } }
function deleteNote(i){ notes.splice(i,1); localStorage.setItem('notes',JSON.stringify(notes)); displayNotes(); }
function deleteAllNotes(){ if(confirm('Are you sure you want to delete all notes?')){ notes=[]; localStorage.setItem('notes',JSON.stringify(notes)); displayNotes(); } }

// Expenses
function displayExpenses(monthFilter=null){ expensesList.innerHTML=''; let total=0; expenses.forEach((e,i)=>{ if(monthFilter && e.month!=monthFilter) return; total+=parseFloat(e.amount); const li=document.createElement('li'); li.textContent=`${e.desc} - $${e.amount} (Month:${e.month})`; const editBtn=document.createElement('button'); editBtn.textContent='Edit'; editBtn.className='edit'; editBtn.onclick=()=>editExpense(i); const delBtn=document.createElement('button'); delBtn.textContent='Delete'; delBtn.className='delete'; delBtn.onclick=()=>deleteExpense(i); li.appendChild(editBtn); li.appendChild(delBtn); expensesList.appendChild(li); }); totalExpense.textContent=`Total Expenses: $${total}`; }
function addExpense(){ const desc=document.getElementById('expenseDesc').value; const amount=document.getElementById('expenseAmount').value; const month=document.getElementById('expenseMonth').value; if(desc.trim()==='' || amount.trim()==='' || month==='') return alert('Enter all fields!'); expenses.push({desc,amount,month}); localStorage.setItem('expenses',JSON.stringify(expenses)); document.getElementById('expenseDesc').value=''; document.getElementById('expenseAmount').value=''; document.getElementById('expenseMonth').value=''; displayExpenses(); }
function editExpense(i){ const d=prompt('Edit description:',expenses[i].desc); const a=prompt('Edit amount:',expenses[i].amount); const m=prompt('Edit month:',expenses[i].month); if(d && a && m){ expenses[i]={desc:d,amount:a,month:m}; localStorage.setItem('expenses',JSON.stringify(expenses)); displayExpenses(); } }
function deleteExpense(i){ expenses.splice(i,1); localStorage.setItem('expenses',JSON.stringify(expenses)); displayExpenses(); }
function deleteAllExpenses(){ if(confirm('Are you sure you want to delete all expenses?')){ expenses=[]; localStorage.setItem('expenses',JSON.stringify(expenses)); displayExpenses(); } }

// Calendar
function openCalendar(){ showAllMonths(); calendarModal.style.display='flex'; }
function closeCalendar(){ calendarModal.style.display='none'; monthTotal.textContent=''; backBtn.style.display='none'; }
function showAllMonths(){ calendarList.innerHTML=''; monthTotal.textContent=''; backBtn.style.display='none'; let months=[]; expenses.forEach(e=>{ if(!months.includes(e.month)) months.push(e.month); }); if(months.length===0){ calendarList.innerHTML='<p>No expenses recorded.</p>'; return; } months.sort((a,b)=>a-b); months.forEach(m=>{ const btn=document.createElement('button'); btn.textContent=monthName(m); btn.className='monthBtn'; btn.onclick=()=>showMonthExpenses(m); calendarList.appendChild(btn); }); }
function showMonthExpenses(month){ calendarList.innerHTML=''; let total=0; expenses.forEach(e=>{ if(e.month==month){ total+=parseFloat(e.amount); const div=document.createElement('div'); div.textContent=`${e.desc} - $${e.amount}`; calendarList.appendChild(div); } }); monthTotal.textContent=`Total for ${monthName(month)}: $${total}`; backBtn.style.display='block'; }
function monthName(num){ const m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]; return m[num-1]; }

// Swipe Gesture
let touchStartX=0; let touchEndX=0;
appContainer.addEventListener('touchstart',e=>{ touchStartX=e.changedTouches[0].screenX; });
appContainer.addEventListener('touchend',e=>{ touchEndX=e.changedTouches[0].screenX; handleSwipe(); });
function handleSwipe(){ if(touchEndX < touchStartX - 50){ showPage('expenses'); } if(touchEndX > touchStartX + 50){ showPage('notes'); } }

// Background Change
function chooseBackground() { document.getElementById('bgInput').click(); }
function setBackground(event) { const file = event.target.files[0]; if(!file) return; const reader = new FileReader(); reader.onload = function(e){ document.body.style.background = `url('${e.target.result}') no-repeat center center fixed`; document.body.style.backgroundSize="cover"; localStorage.setItem('customBackground',e.target.result); }; reader.readAsDataURL(file); }
function resetBackground(){ localStorage.removeItem('customBackground'); document.body.style.backgroundImage=''; document.body.className=mode; }

// Load saved background
window.addEventListener('load',()=>{ const bg = localStorage.getItem('customBackground'); if(bg){ document.body.style.background = `url('${bg}') no-repeat center center fixed`; document.body.style.backgroundSize="cover"; } });

// Init
displayNotes(); displayExpenses();
</script>
</body>
</html>
